# 蜂群驯化师 - Mod 兼容性分析

## 设计决策

为最大化 Mod 兼容性，本 Mod 采用以下设计策略：

| 问题 | 解决方案 |
|------|----------|
| 快捷键冲突 | 使用道具右键菜单代替快捷键 |
| UI 位置冲突 | UI 放置在状态栏旁边，避开常见 Mod 占用区域 |
| 制作栏冲突 | 使用现有制作栏（魔法栏+战斗栏），不添加新制作栏 |
| 蜜蜂实体冲突 | 创建独立的 `pet_bee` prefab，不修改原版蜜蜂 |

## 低风险冲突

### 1. UI 位置（已解决）

| 方案 | 说明 |
|------|------|
| 可拖拽面板 | 玩家可自由拖动到任意位置 |
| 位置记忆 | 拖拽后的位置自动保存 |

**结论**：通过拖拽功能完全解决 UI 冲突问题

### 2. 右键菜单（低风险）

| 道具 | 菜单项 |
|------|--------|
| 蜂巢袋 | 收取/释放相关选项 |
| 指挥棒 | 切换模式 |

**说明**：
- 饥荒原生支持物品右键菜单
- 每个物品的菜单相互独立，不会冲突

### 3. 制作栏（低风险）

| 道具 | 制作栏 | 科技需求 |
|------|--------|----------|
| 驯蜂笛 | 魔法栏 | 无 |
| 蜂巢袋 | 魔法栏 | 无 |
| 指挥棒 | 战斗栏 | 无 |

**说明**：
- 使用游戏原有制作栏，不添加新 Tab
- 无需任何科技，可直接手搓制作
- 兼容性最佳，不会与其他 Mod 的制作栏冲突

### 4. 宠物蜜蜂实体（低风险）

| 策略 | 说明 |
|------|------|
| 独立 prefab | 创建 `pet_bee` 而非修改原版 `bee` |

**好处**：
- 原版蜜蜂行为不受影响
- 与养蜂类 Mod 完全兼容
- 与蜜蜂皮肤 Mod 不冲突

## 仍需注意的潜在冲突

### 1. 跟随者系统（已解决）

| 方案 | 说明 |
|------|------|
| 独立管理系统 | 不依赖原版 follower 组件 |
| 自有跟随逻辑 | 使用独立的蜜蜂管理逻辑 |

**结论**：通过独立管理系统避免与其他宠物 Mod 冲突

### 2. 数据存储（已解决）

| 方案 | 说明 |
|------|------|
| 唯一前缀 | 所有数据键使用 `beetamer_` 前缀 |

**数据键示例**：
- `beetamer_pet_data` - 蜜蜂数据
- `beetamer_bag_contents` - 蜂巢袋内容
- `beetamer_combat_mode` - 战斗模式
- `beetamer_ui_position` - UI 位置

**结论**：通过唯一前缀避免键名冲突

### 3. 事件监听

| 事件 | 注意事项 |
|------|----------|
| 玩家死亡 | 确保不阻断其他 Mod 的处理 |
| 场景切换 | 同上 |

**建议**：
- 使用 `AddListener` 追加而非覆盖
- 处理完成后不阻止事件传播

## 配置项建议

基于兼容性考虑，建议提供以下配置：

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| 收纳袋容量 | 1000 | 1-9999 |
| UI X 偏移 | 0 | 微调 UI 水平位置 |
| UI Y 偏移 | 0 | 微调 UI 垂直位置 |

## 总结

通过采用右键菜单、现有制作栏、独立 prefab、可拖拽 UI、独立管理系统等策略，本 Mod 的兼容性问题已全部解决：

| 问题 | 解决方案 | 状态 |
|------|----------|------|
| 快捷键冲突 | 使用右键菜单 | ✅ 已解决 |
| 制作栏冲突 | 使用现有魔法栏/战斗栏 | ✅ 已解决 |
| 蜜蜂实体冲突 | 独立 `pet_bee` prefab | ✅ 已解决 |
| UI 位置冲突 | 可拖拽面板 + 位置记忆 | ✅ 已解决 |
| 跟随者系统冲突 | 独立蜜蜂管理系统 | ✅ 已解决 |
| 数据存储冲突 | `beetamer_` 前缀 | ✅ 已解决 |
